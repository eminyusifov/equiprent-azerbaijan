# Docker Configuration for EquipRent Platform\n\n# =====================================================\n# Multi-stage Dockerfile for Production Deployment\n# =====================================================\n\n# Build stage\nFROM node:18-alpine AS builder\n\n# Set working directory\nWORKDIR /app\n\n# Copy package files\nCOPY package*.json ./\n\n# Install dependencies\nRUN npm ci --only=production && npm cache clean --force\n\n# Copy source code\nCOPY . .\n\n# Build the application\nRUN npm run build\n\n# =====================================================\n# Production stage\n# =====================================================\n\nFROM nginx:alpine AS production\n\n# Install curl for health checks\nRUN apk add --no-cache curl\n\n# Copy built application\nCOPY --from=builder /app/dist /usr/share/nginx/html\n\n# Copy nginx configuration\nCOPY nginx.conf /etc/nginx/nginx.conf\n\n# Add health check\nHEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\\n  CMD curl -f http://localhost/ || exit 1\n\n# Expose port\nEXPOSE 80\n\n# Start nginx\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n\n# =====================================================\n# Development stage (alternative)\n# =====================================================\n\nFROM node:18-alpine AS development\n\nWORKDIR /app\n\n# Copy package files\nCOPY package*.json ./\n\n# Install all dependencies including devDependencies\nRUN npm install\n\n# Copy source code\nCOPY . .\n\n# Expose development port\nEXPOSE 5173\n\n# Start development server\nCMD [\"npm\", \"run\", \"dev\", \"--\", \"--host\"]\n"